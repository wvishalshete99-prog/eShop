
# azure-pipelines.yml
# Runtime-parameterized pipeline for Maintenance Enable/Disable with action-aware validation & execution

trigger: none  # run manually
pr: none

# -------------------------
# Parameters shown on screen (descriptive)
# -------------------------
parameters:
  - name: maintenanceAction
    displayName: "Action for maintenance (choose one): Enable or Disable"
    type: string
    default: Enable
    values:
      - Enable
      - Disable

  - name: resourceNames
    displayName: "Azure resource name(s) — enter exact names, comma-separated (no spaces). Example: er-gw-01,vpn-gw-02,vm-nw-03  (Required only when Action=Enable)"
    type: string
    default: ''

  - name: referenceId
    displayName: "Reference ID — approved Change/Service/Incident (must start with CRQ/SR/INC). Examples: CRQ00012345, SR00056789, INC00098765"
    type: string
    default: ''

# -------------------------
# Variables you should set
# -------------------------
variables:
  # Name of an existing Azure Resource Manager service connection in ADO
  azureServiceConnection: 'azureSubscriptionServiceConnection'
  # Optional: tag key names (kept as variables for easy governance changes)
  tagMaintenanceKey: 'MaintenanceMode'
  tagChangeRefKey: 'ChangeRef'

stages:
